#如果修改了config.yaml并删除了userDirect，userProxy
#请把下面对应的nameserver-policy也删除，否则内核将无法启动
#Premium内核已经停更不建议使用，如果想要切换至P核
#请自行修改以下配置以适配p核，否则将无法启动
redir-port: 9797
mixed-port: 7890
tproxy-port: 9898
mode: rule
allow-lan: true
unified-delay: false
tcp-concurrent: true
enable-process: true
find-process-mode: strict
bind-address: '*'
log-level: info
ipv6: false
geodata-mode: true
external-controller: 0.0.0.0:9090
external-ui: dashboard/metacubexd
secret: ""
external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"
#面板可选metacubexd/yacd
#interface-name: tun0   #出口网卡名称 可用来桥接VPN类软件

geox-url:
  geoip: "https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geoip.dat"
  geosite: "https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geosite.dat"
  mmdb: "https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb"

profile:
  store-selected: true
  store-fake-ip: true

sniffer:
  enable: false
  sniff:
    TLS:
      ports: [443, 8443]
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
      
tun:
  enable: false
  device: utun
  stack: system
  dns-hijack:
    - any:53
  auto-route: true
  auto-detect-interface: true
  strict-route: false

dns:
  enable: true
  use-hosts: true
  perfer-h3: false
  listen: 0.0.0.0:1053
  enhanced-mode: redir-host
  # redir-host / fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - localhost.ptlogin2.qq.com
    - '*.linksys.com'
    - '*.ntp.*'
    - '+.lan'

  nameserver-policy:
    'rule-set:userDirect':
      - https://223.5.5.5/dns-query
      - https://120.53.53.53/dns-query
    'rule-set:userProxy': 
      - https://8.8.4.4/dns-query#机场
      - https://1.0.0.1/dns-query#机场
    'geosite:cn,private': 
      - https://223.5.5.5/dns-query
      - https://120.53.53.53/dns-query
    'geosite:!cn':
      - https://8.8.4.4/dns-query#机场
      - https://1.0.0.1/dns-query#机场

  proxy-server-nameserver:
    - https://223.5.5.5/dns-query
    - https://120.53.53.53/dns-query